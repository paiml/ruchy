# Nextest configuration for ruchy
# Handles thread-sensitive tests properly

[profile.default]
# Default: parallel execution
threads = "num-cpus"

[[profile.default.overrides]]
# Class property tests require single-threaded execution
# Reason: Interpreter is not thread-safe by design
filter = 'test(class_property)'
threads-required = 1

[[profile.default.overrides]]
# File watcher tests are timing-sensitive
filter = 'test(watcher)'
threads-required = 1
# Give watcher tests more time to complete
slow-timeout = { period = "60s", terminate-after = 2 }

[[profile.default.overrides]]
# REPL tests may have shared state
filter = 'test(repl)'
threads-required = 1
