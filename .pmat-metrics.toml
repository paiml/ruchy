# O(1) Quality Gate Metric Thresholds for Ruchy
# Spec: Phase 2 O(1) Quality Gates with hash-based caching
# Pattern: Toyota Way - Jidoka (MEAN mode: warnings = errors)

[thresholds]
# Hard limits (block commits) - based on Ruchy's Makefile targets
lint_max_ms = 30_000              # 30s (Ruchy target: <30s pre-commit)
test_fast_max_ms = 300_000        # 5min (Ruchy target: <5min TDD cycle)
test_pre_commit_max_ms = 30_000   # 30s (Ruchy target: <30s pre-commit)
coverage_max_ms = 600_000         # 10min (Ruchy target: <10min coverage)
binary_max_bytes = 10_000_000     # 10 MB (ruchy binary should be small)

# Soft limits (warnings only)
build_release_max_ms = 300_000    # 5min (typical Rust build time)
test_all_max_ms = 1_800_000       # 30min (comprehensive test suite)
mutation_test_max_ms = 1_800_000  # 30min (single file mutation testing)

[staleness]
# Metrics older than this trigger warnings
max_age_days = 7

[enforcement]
# Pre-commit behavior (MEAN mode = strict)
fail_on_stale_metrics = false     # Warn, don't block
fail_on_missing_metrics = false   # Allow commits if no cache
fail_on_threshold_violation = true # Block commits on violations (MEAN mode)

[trend_analysis]
# Track metrics for Kaizen (continuous improvement)
enabled = true
retention_days = 90
alert_on_regression = true
regression_threshold_pct = 10.0   # Alert if >10% slower

# Ruchy-specific quality gates
[quality_gates]
# Certeza Three-Tiered Testing Framework targets
min_coverage_pct = 95.0           # Target: ≥95% line coverage
min_mutation_score_pct = 85.0     # Target: ≥85% mutation score
max_cyclomatic_complexity = 10    # Target: ≤10 per function
min_tdg_grade = "A-"              # Target: A- or better (≥88)
